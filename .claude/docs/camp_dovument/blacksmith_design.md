# é›å†¶å±‹ è©³ç´°è¨­è¨ˆæ›¸ (BLACKSMITH_DESIGN_V1)

## æ›´æ–°å±¥æ­´
- V1.0: åˆç‰ˆä½œæˆï¼ˆå“è³ªä¸Šæ˜‡ã‚·ã‚¹ãƒ†ãƒ ã€é­”çŸ³ã‚¯ã‚ªãƒªãƒ†ã‚£ã‚¬ãƒãƒ£è¦ç´ ã‚’å«ã‚€ï¼‰

---

## 1. æ¦‚è¦

é›å†¶å±‹ï¼ˆThe Blacksmithï¼‰ã¯ã€å†’é™ºè€…ã®å‘½ç¶±ã§ã‚ã‚‹ã€Œè£…å‚™å“ã€ã‚’ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã—ã€å¼·åŒ–ã™ã‚‹æ–½è¨­ã§ã™ã€‚

å˜ãªã‚‹æ•°å€¤ã®ä¸Šæ˜‡ã ã‘ã§ãªãã€**ã€Œå“è³ªï¼ˆQualityï¼‰ã€ã¨ã€Œå¼·åŒ–ãƒ¬ãƒ™ãƒ«ï¼ˆLevelï¼‰ã€**ã¨ã„ã†2ã¤ã®è»¸ã§è£…å‚™ã®æ€§èƒ½ãŒæ±ºã¾ã‚Šã¾ã™ã€‚ç‰¹ã«ã€**å¼·åŒ–æ™‚ã«å“è³ªãŒä¸Šæ˜‡ã™ã‚‹ãƒãƒ£ãƒ³ã‚¹**ãŒã‚ã‚Šã€ä½¿ç”¨ã™ã‚‹é­”çŸ³ã®ç¨®é¡ã«ã‚ˆã£ã¦æˆåŠŸç‡ãŒå¤‰ã‚ã‚‹ã€Œã‚¬ãƒãƒ£è¦ç´ ã€ã‚’æŒã¡ã¾ã™ã€‚

### ä¸»ãªå½¹å‰²

1. **å¼·åŒ– (Upgrade)**: è£…å‚™ã®ãƒ¬ãƒ™ãƒ«ã‚’ä¸Šã’ã€åŸºæœ¬æ€§èƒ½ã¨APï¼ˆè€ä¹…åº¦ï¼‰ã‚’å‘ä¸Šã•ã›ã‚‹ã€‚Lv3ã§ç‰¹æ®Šã‚¹ã‚­ãƒ«è§£æ”¾ã€‚**å¼·åŒ–æ™‚ã«å“è³ªä¸Šæ˜‡ãƒãƒ£ãƒ³ã‚¹ã‚ã‚Š**ã€‚
2. **ä¿®ç† (Repair)**: æ¸›å°‘ã—ãŸAPï¼ˆè€ä¹…åº¦ï¼‰ã‚’å›å¾©ã•ã›ã‚‹ã€‚
3. **è§£ä½“ (Dismantle)**: ä¸è¦ãªè£…å‚™ã‚’ç ´å£Šã—ã€é­”çŸ³ã‚„ç´ æã¨ã—ã¦é‚„å…ƒã™ã‚‹ã€‚

---

## 2. è©³ç´°æ©Ÿèƒ½ä»•æ§˜

### 2.1 è£…å‚™ãƒ‡ãƒ¼ã‚¿ã®æ‹¡å¼µï¼ˆå“è³ªã¨ãƒ¬ãƒ™ãƒ«ï¼‰

ã™ã¹ã¦ã®è£…å‚™ã‚¢ã‚¤ãƒ†ãƒ ã«ã€ä»¥ä¸‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ ã—ã¾ã™ã€‚

#### 2.1.1 å¼·åŒ–ãƒ¬ãƒ™ãƒ« (Level)

**ç¯„å›²:** Lv0 ã€œ Lv3 (MAX)

**åŠ¹æœ:** 1ãƒ¬ãƒ™ãƒ«ã”ã¨ã«åŸºæœ¬ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆATK/DEF/Magicï¼‰ã¨æœ€å¤§APãŒå¢—åŠ ã€‚

| ãƒ¬ãƒ™ãƒ« | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è£œæ­£ | APè£œæ­£ | ç‰¹æ®ŠåŠ¹æœ |
|--------|--------------|--------|----------|
| Lv0 | Â±0% | Â±0% | ãªã— |
| Lv1 | +10% | +20% | ãªã— |
| Lv2 | +20% | +40% | ãªã— |
| Lv3 | +30% | +60% | è§£æ”¾ã‚¹ã‚­ãƒ«æœ‰åŠ¹åŒ– |

#### 2.1.2 å“è³ª (Quality)

ã€ŒåŒã˜åå‰ã®è£…å‚™ã§ã‚‚æ€§èƒ½ãŒé•ã†ã€ã‚’å®Ÿç¾ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

**ğŸ² å“è³ªä¸Šæ˜‡ã®æ–°ã‚·ã‚¹ãƒ†ãƒ :**
- è£…å‚™ç”Ÿæˆæ™‚ã¯åŸºæœ¬çš„ã« `normal` ã§ç”Ÿæˆ
- **é›å†¶å±‹ã§ã®å¼·åŒ–æ™‚ã«å“è³ªãŒä¸Šæ˜‡ã™ã‚‹ãƒãƒ£ãƒ³ã‚¹ãŒã‚ã‚‹**
- ä½¿ç”¨ã™ã‚‹é­”çŸ³ã®ç¨®é¡ã«ã‚ˆã£ã¦ä¸Šæ˜‡ç¢ºç‡ãŒå¤‰ã‚ã‚‹ï¼ˆã‚¬ãƒãƒ£è¦ç´ ï¼‰

**å“è³ªã®ç¨®é¡:**

| å“è³ªå | è‹±èªID | è£œæ­£å€¤ | åˆæœŸç”Ÿæˆç‡ | åç§°è¡¨ç¤ºä¾‹ |
|--------|--------|--------|-----------|-----------|
| ç²—æ‚ª | poor | 0.95 (-5%) | 10% | éŒ†ã³ãŸ ã€‡ã€‡ |
| é€šå¸¸ | normal | 1.00 (Â±0%) | 70% | ã€‡ã€‡ |
| è‰¯è³ª | good | 1.03 (+3%) | 15% | é›ãˆã‚‰ã‚ŒãŸ ã€‡ã€‡ |
| åå“ | master | 1.05 (+5%) | 5% | åå·¥ã® ã€‡ã€‡ |

**è£œæ­£å¯¾è±¡:** ATK, DEF, Magic, HPè£œæ­£ãªã©ã®æ•°å€¤ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆAPã¯å¯¾è±¡å¤–ï¼‰

---

### 2.2 å¼·åŒ–ã‚·ã‚¹ãƒ†ãƒ  (Upgrade)

Goldã¨é­”çŸ³ï¼ˆMagic Stone Valueï¼‰ã‚’æ¶ˆè²»ã—ã¦ãƒ¬ãƒ™ãƒ«ã‚’ä¸Šã’ã¾ã™ã€‚

#### 2.2.1 åŸºæœ¬å¼·åŒ–ã‚³ã‚¹ãƒˆ

å¼·åŒ–ã‚³ã‚¹ãƒˆã¯`EQUIPMENT_AND_ITEMS_DESIGN.md`ã«æº–æ‹ ã—ã¾ã™ã€‚**Phase 1å®Ÿè£…å¾Œã«ãƒãƒ©ãƒ³ã‚¹èª¿æ•´äºˆå®š**ã€‚

**å‚è€ƒã‚³ã‚¹ãƒˆè¡¨:**

| ãƒ¬ã‚¢ãƒªãƒ†ã‚£ | Lv0â†’1 | Lv1â†’2 | Lv2â†’3 |
|-----------|-------|-------|-------|
| Common | 200G + é­”çŸ³5 | 400G + é­”çŸ³10 | 800G + é­”çŸ³20 |
| Rare | 400G + é­”çŸ³10 | 800G + é­”çŸ³20 | 1600G + é­”çŸ³40 |
| Epic | 800G + é­”çŸ³20 | 1600G + é­”çŸ³40 | 3200G + é­”çŸ³80 |
| Legendary | 1600G + é­”çŸ³40 | 3200G + é­”çŸ³80 | 6400G + é­”çŸ³160 |

#### 2.2.2 é­”çŸ³ã®æ¶ˆè²»æ–¹æ³•

ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªå†…ã®ã€Œé­”çŸ³ã‚¢ã‚¤ãƒ†ãƒ ã€ã‚’è‡ªå‹•çš„ã«è¨ˆç®—ã—ã€å¿…è¦ãªåˆ†ã ã‘ä¾¡å€¤ã®ä½ã„ã‚‚ã®ã‹ã‚‰æ¶ˆè²»ã—ã¾ã™ï¼ˆ`InventoryContext.useMagicStones` ã‚’åˆ©ç”¨ï¼‰ã€‚

ä¸è¶³ã—ã¦ã„ã‚‹å ´åˆã¯å¼·åŒ–ä¸å¯ã€‚

---

### 2.3 å“è³ªä¸Šæ˜‡ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ–°æ©Ÿèƒ½ï¼‰

#### 2.3.1 å“è³ªä¸Šæ˜‡ã®ä»•çµ„ã¿

**ãƒˆãƒªã‚¬ãƒ¼:** è£…å‚™ã‚’å¼·åŒ–ï¼ˆãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼‰ã™ã‚‹éš›ã€å“è³ªãŒä¸Šæ˜‡ã™ã‚‹ãƒãƒ£ãƒ³ã‚¹ãŒã‚ã‚‹

**åˆ¤å®šã‚¿ã‚¤ãƒŸãƒ³ã‚°:** ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—æˆåŠŸå¾Œã€å³åº§ã«å“è³ªä¸Šæ˜‡åˆ¤å®šã‚’è¡Œã†

**ä¸Šæ˜‡ãƒ«ãƒ¼ãƒ«:**
- poor â†’ normal â†’ good â†’ master ã®é †ã«1æ®µéšãšã¤ä¸Šæ˜‡
- ã™ã§ã« master ã®å ´åˆã¯ä¸Šæ˜‡ã—ãªã„
- 1å›ã®å¼·åŒ–ã§æœ€å¤§1æ®µéšã¾ã§ä¸Šæ˜‡

#### 2.3.2 é­”çŸ³ã®ç¨®é¡ã«ã‚ˆã‚‹åŠ¹æœ

ä½¿ç”¨ã™ã‚‹é­”çŸ³ã®**ä¾¡å€¤ç·é¡**ã¨**ç¨®é¡**ã«ã‚ˆã£ã¦ã€å“è³ªä¸Šæ˜‡ç¢ºç‡ã¨æœ€ä½ä¿è¨¼ãŒå¤‰ã‚ã‚Šã¾ã™ã€‚

**é­”çŸ³ã®å„ªå…ˆä½¿ç”¨è¨­å®š:**

| å¼·åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | ä½¿ç”¨ã™ã‚‹é­”çŸ³ | å“è³ªä¸Šæ˜‡ç¢ºç‡ | æœ€ä½ä¿è¨¼ | è¿½åŠ ã‚³ã‚¹ãƒˆ |
|--------------|------------|------------|---------|-----------|
| é€šå¸¸å¼·åŒ– | è‡ªå‹•é¸æŠï¼ˆå°â†’ä¸­â†’å¤§ï¼‰ | åŸºæœ¬ç¢ºç‡ | ãªã— | ãªã— |
| å“è³ªé‡è¦–å¼·åŒ– | ä¸­ãƒ»å¤§ã‚’å„ªå…ˆä½¿ç”¨ | é«˜ç¢ºç‡ | normalä¿è¨¼ | +50% Gold |
| æœ€é«˜å“è³ªç‹™ã„ | å¤§ã®ã¿ä½¿ç”¨ | æœ€é«˜ç¢ºç‡ | goodä¿è¨¼ | +100% Gold |

**å“è³ªä¸Šæ˜‡ã®åŸºæœ¬ç¢ºç‡ï¼ˆé€šå¸¸å¼·åŒ–ï¼‰:**

| ç¾åœ¨ã®å“è³ª | æ¬¡ã®å“è³ª | ä¸Šæ˜‡ç¢ºç‡ |
|-----------|---------|---------|
| poor | normal | 40% |
| normal | good | 20% |
| good | master | 10% |

**å“è³ªé‡è¦–å¼·åŒ–ï¼ˆé­”çŸ³ï¼ˆä¸­ï¼‰ä»¥ä¸Šã‚’å„ªå…ˆï¼‰:**

| ç¾åœ¨ã®å“è³ª | æ¬¡ã®å“è³ª | ä¸Šæ˜‡ç¢ºç‡ |
|-----------|---------|---------|
| poor | normal | 80% |
| normal | good | 40% |
| good | master | 15% |

**æœ€ä½ä¿è¨¼:** å¼·åŒ–å¾Œã®å“è³ªãŒæœ€ä½ã§ã‚‚ `normal` ã«ãªã‚‹

**æœ€é«˜å“è³ªç‹™ã„ï¼ˆé­”çŸ³ï¼ˆå¤§ï¼‰ã®ã¿ä½¿ç”¨ï¼‰:**

| ç¾åœ¨ã®å“è³ª | æ¬¡ã®å“è³ª | ä¸Šæ˜‡ç¢ºç‡ |
|-----------|---------|---------|
| poor | normal | 100% |
| normal | good | 60% |
| good | master | 25% |

**æœ€ä½ä¿è¨¼:** å¼·åŒ–å¾Œã®å“è³ªãŒæœ€ä½ã§ã‚‚ `good` ã«ãªã‚‹

#### 2.3.3 é­”çŸ³ã®ä¾¡å€¤è¨ˆç®—

```typescript
interface MagicStoneUsage {
  small: number;  // ä½¿ç”¨ã™ã‚‹é­”çŸ³ï¼ˆå°ï¼‰ã®å€‹æ•°
  medium: number; // ä½¿ç”¨ã™ã‚‹é­”çŸ³ï¼ˆä¸­ï¼‰ã®å€‹æ•°
  large: number;  // ä½¿ç”¨ã™ã‚‹é­”çŸ³ï¼ˆå¤§ï¼‰ã®å€‹æ•°
  totalValue: number; // åˆè¨ˆä¾¡å€¤
}

// é­”çŸ³ã®å„ªå…ˆåº¦åˆ¤å®š
function getMagicStoneQuality(usage: MagicStoneUsage): 'low' | 'medium' | 'high' {
  const totalValue = usage.totalValue;
  const largeRatio = (usage.large * 350) / totalValue;
  const mediumRatio = (usage.medium * 100) / totalValue;
  
  if (largeRatio >= 0.5) return 'high';      // å¤§ãŒ50%ä»¥ä¸Š
  if (mediumRatio >= 0.5) return 'medium';   // ä¸­ãŒ50%ä»¥ä¸Š
  return 'low';                               // ãã‚Œä»¥å¤–
}
```

#### 2.3.4 å“è³ªä¸Šæ˜‡ã®æ¼”å‡º

**æˆåŠŸæ™‚:**
- è£…å‚™ãŒè™¹è‰²ã«å…‰ã‚Šè¼ã
- ã€Œã‚­ãƒ©ãƒ¼ãƒ³ï¼ã€ã¨ã„ã†éŸ³
- å“è³ªåãŒå¤‰åŒ–ã™ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- ã€Œå“è³ªãŒä¸Šæ˜‡ã—ã¾ã—ãŸï¼ poor â†’ normalã€

**å¤±æ•—æ™‚:**
- é€šå¸¸ã®å¼·åŒ–æ¼”å‡ºã®ã¿
- ã€Œå“è³ªã¯å¤‰åŒ–ã—ã¾ã›ã‚“ã§ã—ãŸã€

---

### 2.4 ä¿®ç†ã‚·ã‚¹ãƒ†ãƒ  (Repair)

æ¢ç´¢ã§æ¶ˆè€—ã—ãŸAPï¼ˆè€ä¹…åº¦ï¼‰ã‚’å›å¾©ã—ã¾ã™ã€‚

#### 2.4.1 ä¿®ç†ã‚³ã‚¹ãƒˆ

**è¨ˆç®—å¼:**
```typescript
const REPAIR_COST_PER_AP = 0.5;

const repairCost = (maxAP - currentAP) * REPAIR_COST_PER_AP * rarityMultiplier;
```

**ãƒ¬ã‚¢ãƒªãƒ†ã‚£è£œæ­£:**
- Common: x1.0
- Rare: x1.5
- Epic: x2.0
- Legendary: x3.0

**ä¾‹:**
- Commonè£…å‚™ï¼ˆAP 150ï¼‰ãŒ 50 ã¾ã§æ¸›ã£ãŸå ´åˆ
  - `(150 - 50) Ã— 0.5 Ã— 1.0 = 50 G`

- Legendaryè£…å‚™ï¼ˆAP 450ï¼‰ãŒ 100 ã¾ã§æ¸›ã£ãŸå ´åˆ
  - `(450 - 100) Ã— 0.5 Ã— 3.0 = 525 G`

#### 2.4.2 ä¿®ç†UI

**Phase 1: ã‚·ãƒ³ãƒ—ãƒ«å®Ÿè£…**
- ã€Œå…¨å›å¾© (XXX G)ã€ãƒœã‚¿ãƒ³ã®ã¿
- ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ãªã©ã¯ä½¿ã‚ãªã„

**Phase 2ä»¥é™ã®æ‹¡å¼µ:**
- éƒ¨åˆ†ä¿®ç†ï¼ˆ50%å›å¾©ãªã©ï¼‰
- ä¸€æ‹¬ä¿®ç†ï¼ˆå…¨è£…å‚™ã‚’ä¿®ç†ï¼‰

---

### 2.5 è§£ä½“ã‚·ã‚¹ãƒ†ãƒ  (Dismantle)

è£…å‚™ã‚’ç ´å£Šã—ã¦ã€Œé­”çŸ³ã€ã‚’å–ã‚Šå‡ºã—ã¾ã™ã€‚

#### 2.5.1 é‚„å…ƒãƒ¬ãƒ¼ãƒˆ

**åŸºæœ¬é‚„å…ƒç‡ï¼ˆãƒ¬ã‚¢ãƒªãƒ†ã‚£å›ºå®šï¼‰:**

| ãƒ¬ã‚¢ãƒªãƒ†ã‚£ | é‚„å…ƒç‡ |
|-----------|--------|
| Common | 10% |
| Rare | 15% |
| Epic | 20% |
| Legendary | 25% |

**è¨ˆç®—ä¾‹:**
```typescript
const baseReturn = item.sellPrice * returnRate;

// ä¾‹: Rareè£…å‚™ï¼ˆå£²å´ä¾¡æ ¼ 1000Gï¼‰
// 1000 Ã— 0.15 = 150G ç›¸å½“ã®é­”çŸ³

// é­”çŸ³ã«å¤‰æ›
// é­”çŸ³ï¼ˆä¸­ï¼‰100G Ã— 1å€‹ + é­”çŸ³ï¼ˆå°ï¼‰30G Ã— 1å€‹ + æ®‹ã‚Š20Gåˆ†
```

#### 2.5.2 é­”çŸ³ã¸ã®å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯

```typescript
function convertToMagicStones(value: number): MagicStoneReward[] {
  const stones: MagicStoneReward[] = [];
  let remaining = value;
  
  // é­”çŸ³ï¼ˆå¤§ï¼‰: 350G
  while (remaining >= 350) {
    stones.push({ typeId: 'magic_stone_large', count: 1 });
    remaining -= 350;
  }
  
  // é­”çŸ³ï¼ˆä¸­ï¼‰: 100G
  while (remaining >= 100) {
    stones.push({ typeId: 'magic_stone_medium', count: 1 });
    remaining -= 100;
  }
  
  // é­”çŸ³ï¼ˆå°ï¼‰: 30G
  while (remaining >= 30) {
    stones.push({ typeId: 'magic_stone_small', count: 1 });
    remaining -= 30;
  }
  
  // ç«¯æ•°ã¯Goldã§è¿”å´ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  if (remaining > 0) {
    // åˆ‡ã‚Šæ¨ã¦ã¾ãŸã¯Goldã§è¿”å´
  }
  
  return stones;
}
```

#### 2.5.3 ãƒ¬ã‚¢ãƒªãƒ†ã‚£ãƒœãƒ¼ãƒŠã‚¹

**Epicä»¥ä¸Šã‚’è§£ä½“ã—ãŸå ´åˆ:**
- ä½ç¢ºç‡ï¼ˆ20%ï¼‰ã§é­”çŸ³ï¼ˆå¤§ï¼‰ãŒ1å€‹è¿½åŠ 
- å¼·åŒ–ãƒ¬ãƒ™ãƒ«ãŒé«˜ã„ã»ã©ãƒœãƒ¼ãƒŠã‚¹ç¢ºç‡ã‚¢ãƒƒãƒ—
  - Lv1: +5%
  - Lv2: +10%
  - Lv3: +15%

**ä¾‹:**
```typescript
// Epic Lv3è£…å‚™ã‚’è§£ä½“
const bonusChance = 0.20 + 0.15; // 35%

if (Math.random() < bonusChance) {
  // é­”çŸ³ï¼ˆå¤§ï¼‰ã‚’1å€‹è¿½åŠ ç²å¾—
}
```

#### 2.5.4 è§£ä½“ã®è­¦å‘Š

**ä»¥ä¸‹ã®æ¡ä»¶ã§ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤º:**
- ãƒ¬ã‚¢ãƒªãƒ†ã‚£ãŒ Rare ä»¥ä¸Š
- å¼·åŒ–ãƒ¬ãƒ™ãƒ«ãŒ Lv1 ä»¥ä¸Š
- å“è³ªãŒ good ä»¥ä¸Š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ è­¦å‘Š                                    â”‚
â”‚                                             â”‚
â”‚  åå·¥ã®å‰£ç¥ã®è–å‰£ (Lv3, master)             â”‚
â”‚  ã‚’è§£ä½“ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚                 â”‚
â”‚                                             â”‚
â”‚  ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚                 â”‚
â”‚  æœ¬å½“ã«è§£ä½“ã—ã¾ã™ã‹ï¼Ÿ                       â”‚
â”‚                                             â”‚
â”‚  ç²å¾—é­”çŸ³: é­”çŸ³ï¼ˆå¤§ï¼‰x 5, é­”çŸ³ï¼ˆä¸­ï¼‰x 2     â”‚
â”‚                                             â”‚
â”‚  [è§£ä½“ã™ã‚‹]  [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. UI/UX ãƒ‡ã‚¶ã‚¤ãƒ³

### 3.1 ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

èƒŒæ™¯ã¯èµ¤ç†±ã—ãŸç‚‰ã¨é‡‘åºŠãŒã‚ã‚‹å·¥æˆ¿ã€‚ç­‹è‚‰è³ªã®é›å†¶å¸«ãŒæ§Œã‚’æŒ¯ã‚‹ã£ã¦ã„ã‚‹ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš’ï¸ é›å†¶å±‹ - The Blacksmith                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ‰€æŒé‡‘: 2,400 G    é­”çŸ³ä¾¡å€¤: 480 G                   â”‚
â”‚                                                        â”‚
â”‚  [å¼·åŒ–ãƒ»ä¿®ç†] [è§£ä½“]                                   â”‚
â”‚  â•â•â•â•â•â•â•â•â•  â”€â”€â”€â”€                                        â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ è£…å‚™ãƒªã‚¹ãƒˆ        â”‚  â”‚ é¸æŠä¸­ã®è£…å‚™                â”‚ â”‚
â”‚  â”‚ [å…¨ã¦][æ­¦å™¨][é˜²å…·]â”‚  â”‚ ğŸ—¡ï¸ éŒ†ã³ãŸé‰„ã®å‰£             â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚ Quality: Poor (-5%)        â”‚ â”‚
â”‚  â”‚ ğŸ—¡ï¸ é‰„ã®å‰£       â”‚  â”‚ Level: 0                   â”‚ â”‚
â”‚  â”‚    Lv0 / Poor   â”‚  â”‚ AP: 45 / 50 (90%)          â”‚ â”‚
â”‚  â”‚    AP: 45/50    â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚ ã€å¼·åŒ–ã€‘Lv0 â†’ Lv1          â”‚ â”‚
â”‚  â”‚ ğŸ›¡ï¸ é¨å£«ã®é§     â”‚  â”‚ ATK: 10 â†’ 11 (+10%)        â”‚ â”‚
â”‚  â”‚    Lv2 / Normal â”‚  â”‚ AP:  50 â†’ 60 (+20%)        â”‚ â”‚
â”‚  â”‚    AP: 10/150âš ï¸ â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚ ã‚³ã‚¹ãƒˆ: 200 G + é­”çŸ³5      â”‚ â”‚
â”‚  â”‚ ğŸ’ åŠ›ã®æŒ‡è¼ª     â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚    Lv0 / Good   â”‚  â”‚ å¼·åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³:             â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚ â—‹ é€šå¸¸å¼·åŒ–                 â”‚ â”‚
â”‚  â”‚ ...              â”‚  â”‚ â—‹ å“è³ªé‡è¦– (+50% Gold)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â—‹ æœ€é«˜å“è³ªç‹™ã„(+100% Gold)â”‚ â”‚
â”‚                        â”‚                            â”‚ â”‚
â”‚                        â”‚ [å¼·åŒ–ã™ã‚‹]  [ä¿®ç†: 25 G]   â”‚ â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                        â”‚
â”‚  [ã‚­ãƒ£ãƒ³ãƒ—ã«æˆ»ã‚‹]                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 å¼·åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¼·åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  â—‹ é€šå¸¸å¼·åŒ–                            â”‚
â”‚     ã‚³ã‚¹ãƒˆ: 200 G + é­”çŸ³5              â”‚
â”‚     å“è³ªä¸Šæ˜‡ç¢ºç‡: åŸºæœ¬                 â”‚
â”‚     æœ€ä½ä¿è¨¼: ãªã—                     â”‚
â”‚                                        â”‚
â”‚  â—‹ å“è³ªé‡è¦–å¼·åŒ–                        â”‚
â”‚     ã‚³ã‚¹ãƒˆ: 300 G + é­”çŸ³5 (ä¸­å„ªå…ˆ)     â”‚
â”‚     å“è³ªä¸Šæ˜‡ç¢ºç‡: é«˜                   â”‚
â”‚     æœ€ä½ä¿è¨¼: normal                   â”‚
â”‚                                        â”‚
â”‚  â—‹ æœ€é«˜å“è³ªç‹™ã„                        â”‚
â”‚     ã‚³ã‚¹ãƒˆ: 400 G + é­”çŸ³5 (å¤§ã®ã¿)     â”‚
â”‚     å“è³ªä¸Šæ˜‡ç¢ºç‡: æœ€é«˜                 â”‚
â”‚     æœ€ä½ä¿è¨¼: good                     â”‚
â”‚                                        â”‚
â”‚  æ‰€æŒé­”çŸ³:                             â”‚
â”‚  å°: 10å€‹ (300G)                       â”‚
â”‚  ä¸­: 3å€‹ (300G)                        â”‚
â”‚  å¤§: 0å€‹ (0G)   â† ä¸è¶³ï¼              â”‚
â”‚                                        â”‚
â”‚  [æ±ºå®š]  [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 è§£ä½“ã‚¿ãƒ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [å¼·åŒ–ãƒ»ä¿®ç†] [è§£ä½“]                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€  â•â•â•â•â•                                       â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ è£…å‚™ãƒªã‚¹ãƒˆ        â”‚  â”‚ è§£ä½“äºˆæ¸¬                    â”‚ â”‚
â”‚  â”‚ [å…¨ã¦][æ­¦å™¨][é˜²å…·]â”‚  â”‚ ğŸ—¡ï¸ é‰„ã®å‰£ (Lv0, poor)      â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚ ğŸ—¡ï¸ é‰„ã®å‰£       â”‚  â”‚ è§£ä½“ã§ç²å¾—:                 â”‚ â”‚
â”‚  â”‚    Lv0 / Poor   â”‚  â”‚ é­”çŸ³ï¼ˆå°ï¼‰x 1 (30G)        â”‚ â”‚
â”‚  â”‚    å£²å´: 50G    â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚ â€»å£²å´ä¾¡æ ¼ã®10%             â”‚ â”‚
â”‚  â”‚ ğŸ›¡ï¸ é¨å£«ã®é§     â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚    Lv2 / Normal â”‚  â”‚ [è§£ä½“ã™ã‚‹]                 â”‚ â”‚
â”‚  â”‚    å£²å´: 300G   â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 æ¼”å‡º (Feedback)

#### å¼·åŒ–æˆåŠŸ
```
åŠ¹æœéŸ³: ã‚«ãƒ¼ãƒ³ï¼ã‚«ãƒ¼ãƒ³ï¼ï¼ˆé‡‘åºŠï¼‰
ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: 
  1. ç‚ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
  2. ç«èŠ±ãŒæ•£ã‚‹
  3. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ•°å€¤ãŒç·‘è‰²ã§ä¸Šæ˜‡
```

#### å“è³ªä¸Šæ˜‡æˆåŠŸï¼ˆè¿½åŠ æ¼”å‡ºï¼‰
```
åŠ¹æœéŸ³: ã‚­ãƒ©ãƒ¼ãƒ³ï¼ï¼ˆç‰¹åˆ¥ãªéŸ³ï¼‰
ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³:
  1. è£…å‚™ãŒè™¹è‰²ã«å…‰ã‚Šè¼ã
  2. ã€Œå“è³ªãŒä¸Šæ˜‡ã—ã¾ã—ãŸï¼ã€
  3. poor â†’ normal ãªã©æ®µéšè¡¨ç¤º
  4. ç”»é¢å…¨ä½“ãŒä¸€ç¬å…‰ã‚‹
```

#### Lv3åˆ°é”ï¼ˆã‚¹ã‚­ãƒ«è§£æ”¾ï¼‰
```
åŠ¹æœéŸ³: ã‚´ã‚´ã‚´ã‚´...ãƒ‰ãƒ¼ãƒ³ï¼
ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³:
  1. è£…å‚™ãŒæ¿€ã—ãå…‰ã‚‹
  2. ã€Œè§£æ”¾ã‚¹ã‚­ãƒ«ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¾ã—ãŸï¼ã€
  3. ã‚¹ã‚­ãƒ«åãŒè¡¨ç¤ºã•ã‚Œã‚‹
```

#### ä¿®ç†
```
åŠ¹æœéŸ³: ã‚·ãƒ¥ã‚¥ã‚¥...ï¼ˆç„¼ãå…¥ã‚Œï¼‰
ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³:
  1. APãƒãƒ¼ãŒæº€ã‚¿ãƒ³ã«ãªã‚‹
  2. æ°´è’¸æ°—ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
```

#### è§£ä½“
```
åŠ¹æœéŸ³: ãƒã‚­ãƒƒï¼ã‚¬ã‚·ãƒ£ãƒ¼ãƒ³ï¼
ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³:
  1. è£…å‚™ãŒç •ã‘ã‚‹
  2. é­”çŸ³ã‚¢ã‚¤ã‚³ãƒ³ãŒé£›ã³å‡ºã™
  3. ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã«ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º
```

---

## 4. ãƒ‡ãƒ¼ã‚¿æ§‹é€ å®šç¾©

### 4.1 ItemTypes.ts ã®æ‹¡å¼µ

```typescript
// src/types/ItemTypes.ts ã«è¿½è¨˜

export type QualityType = 'poor' | 'normal' | 'good' | 'master';

export interface EquipmentItem extends Item {
  itemType: 'equipment';
  
  // é›å†¶å±‹æ‹¡å¼µãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
  level: 0 | 1 | 2 | 3;
  quality: QualityType;
  
  // è¨ˆç®—æ¸ˆã¿ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆãƒ™ãƒ¼ã‚¹ Ã— å“è³ª Ã— ãƒ¬ãƒ™ãƒ«è£œæ­£ï¼‰
  stats: {
    atk?: number;
    def?: number;
    magic?: number;
    maxHp?: number;
  };
  
  // è§£æ”¾ã‚¹ã‚­ãƒ«ï¼ˆEpic/Legendaryè£…å‚™ã®ã¿ï¼‰
  unlockedSkills?: EquipmentEffect[];
  
  // ä¿è­·ãƒ•ãƒ©ã‚°ï¼ˆPhase 2ï¼‰
  isLocked?: boolean;
}

// å“è³ªãƒ‡ãƒ¼ã‚¿ã®å®šç¾©
export const QUALITY_MODIFIERS: Record<QualityType, number> = {
  poor: 0.95,
  normal: 1.0,
  good: 1.03,
  master: 1.05
};

export const QUALITY_NAMES: Record<QualityType, string> = {
  poor: 'éŒ†ã³ãŸ',
  normal: '',
  good: 'é›ãˆã‚‰ã‚ŒãŸ',
  master: 'åå·¥ã®'
};

export const QUALITY_COLORS: Record<QualityType, string> = {
  poor: '#888888',
  normal: '#ffffff',
  good: '#4ade80',
  master: '#fbbf24'
};
```

### 4.2 BlacksmithTypes.ts

```typescript
// src/types/BlacksmithTypes.ts (æ–°è¦ä½œæˆ)

import type { EquipmentItem, QualityType } from './ItemTypes';

/**
 * å¼·åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³
 */
export type UpgradeOption = 'normal' | 'quality_focused' | 'max_quality';

export interface UpgradeConfig {
  option: UpgradeOption;
  goldCost: number;
  magicStoneCost: number;
  qualityUpgradeChances: QualityUpgradeChances;
  guaranteedMinQuality: QualityType | null;
}

/**
 * å“è³ªä¸Šæ˜‡ç¢ºç‡
 */
export interface QualityUpgradeChances {
  poor_to_normal: number;
  normal_to_good: number;
  good_to_master: number;
}

/**
 * å¼·åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³åˆ¥ã®è¨­å®š
 */
export const UPGRADE_OPTIONS: Record<UpgradeOption, {
  name: string;
  description: string;
  goldMultiplier: number;
  magicStonePreference: 'auto' | 'medium_preferred' | 'large_only';
  qualityUpgradeChances: QualityUpgradeChances;
  guaranteedMinQuality: QualityType | null;
}> = {
  normal: {
    name: 'é€šå¸¸å¼·åŒ–',
    description: 'åŸºæœ¬çš„ãªå¼·åŒ–ã€‚å“è³ªä¸Šæ˜‡ç¢ºç‡ã¯æ¨™æº–ã€‚',
    goldMultiplier: 1.0,
    magicStonePreference: 'auto',
    qualityUpgradeChances: {
      poor_to_normal: 0.40,
      normal_to_good: 0.20,
      good_to_master: 0.10
    },
    guaranteedMinQuality: null
  },
  quality_focused: {
    name: 'å“è³ªé‡è¦–å¼·åŒ–',
    description: 'é­”çŸ³ï¼ˆä¸­ï¼‰ä»¥ä¸Šã‚’å„ªå…ˆä½¿ç”¨ã€‚å“è³ªä¸Šæ˜‡ç¢ºç‡ãŒé«˜ã„ã€‚',
    goldMultiplier: 1.5,
    magicStonePreference: 'medium_preferred',
    qualityUpgradeChances: {
      poor_to_normal: 0.80,
      normal_to_good: 0.40,
      good_to_master: 0.15
    },
    guaranteedMinQuality: 'normal'
  },
  max_quality: {
    name: 'æœ€é«˜å“è³ªç‹™ã„',
    description: 'é­”çŸ³ï¼ˆå¤§ï¼‰ã®ã¿ä½¿ç”¨ã€‚å“è³ªä¸Šæ˜‡ç¢ºç‡ãŒæœ€ã‚‚é«˜ã„ã€‚',
    goldMultiplier: 2.0,
    magicStonePreference: 'large_only',
    qualityUpgradeChances: {
      poor_to_normal: 1.0,
      normal_to_good: 0.60,
      good_to_master: 0.25
    },
    guaranteedMinQuality: 'good'
  }
};

/**
 * ä¿®ç†ã‚³ã‚¹ãƒˆè¨­å®š
 */
export const REPAIR_COST_PER_AP = 0.5;

export const REPAIR_RARITY_MULTIPLIER: Record<string, number> = {
  common: 1.0,
  rare: 1.5,
  epic: 2.0,
  legendary: 3.0
};

/**
 * è§£ä½“é‚„å…ƒç‡
 */
export const DISMANTLE_RETURN_RATES: Record<string, number> = {
  common: 0.10,
  rare: 0.15,
  epic: 0.20,
  legendary: 0.25
};

/**
 * è§£ä½“ãƒœãƒ¼ãƒŠã‚¹ï¼ˆEpicä»¥ä¸Šï¼‰
 */
export const DISMANTLE_BONUS_CHANCE = 0.20; // åŸºæœ¬20%
export const DISMANTLE_LEVEL_BONUS = {
  1: 0.05,
  2: 0.10,
  3: 0.15
};

/**
 * å¼·åŒ–çµæœ
 */
export interface UpgradeResult {
  success: boolean;
  newLevel: number;
  oldQuality: QualityType;
  newQuality: QualityType;
  qualityUpgraded: boolean;
  skillUnlocked: boolean;
  newStats: EquipmentItem['stats'];
}

/**
 * è§£ä½“çµæœ
 */
export interface DismantleResult {
  magicStones: {
    typeId: string;
    count: number;
  }[];
  bonusReceived: boolean;
}
```

---

## 5. å®Ÿè£…æ‰‹é †æ›¸ï¼ˆæ¦‚è¦ï¼‰

### Phase 1: å“è³ªã‚·ã‚¹ãƒ†ãƒ ã®å°å…¥ï¼ˆWeek 1: Day 1-3ï¼‰

**ã‚¿ã‚¹ã‚¯ 1.1: å‹å®šç¾©ã®æ‹¡å¼µ**
```
â–¡ ItemTypes.ts ã« QualityType è¿½åŠ 
â–¡ EquipmentItem å‹ã®æ‹¡å¼µ
â–¡ BlacksmithTypes.ts ä½œæˆ
```

**ã‚¿ã‚¹ã‚¯ 1.2: è£…å‚™ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ã®æ›´æ–°**
```
â–¡ equipmentGenerator.ts ã®æ›´æ–°
  â–¡ å“è³ªã®åˆæœŸå€¤è¨­å®šï¼ˆåŸºæœ¬ normalï¼‰
  â–¡ ãƒ¬ãƒ™ãƒ«ã®åˆæœŸå€¤è¨­å®šï¼ˆLv0ï¼‰
  â–¡ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
```

**ã‚¿ã‚¹ã‚¯ 1.3: æ—¢å­˜è£…å‚™ã¸ã®å“è³ªä»˜ä¸**
```
â–¡ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
  â–¡ æ—¢å­˜ã®è£…å‚™ã« quality: 'normal' ã‚’ä»˜ä¸
  â–¡ level: 0 ã‚’ä»˜ä¸
  â–¡ stats ã‚’å†è¨ˆç®—
```

---

### Phase 2: å¼·åŒ–ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…ï¼ˆWeek 1: Day 4 - Week 2: Day 2ï¼‰

**ã‚¿ã‚¹ã‚¯ 2.1: å¼·åŒ–ãƒ­ã‚¸ãƒƒã‚¯**
```
â–¡ src/camps/facilities/Blacksmith/logic/upgradeEquipment.ts
  â–¡ ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—å‡¦ç†
  â–¡ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å†è¨ˆç®—
  â–¡ å“è³ªä¸Šæ˜‡åˆ¤å®š
  â–¡ ã‚¹ã‚­ãƒ«è§£æ”¾åˆ¤å®š
```

**ã‚¿ã‚¹ã‚¯ 2.2: å“è³ªä¸Šæ˜‡ãƒ­ã‚¸ãƒƒã‚¯**
```
â–¡ qualityUpgrade.ts
  â–¡ å“è³ªä¸Šæ˜‡ç¢ºç‡ã®è¨ˆç®—
  â–¡ é­”çŸ³ã®ç¨®é¡åˆ¤å®š
  â–¡ æœ€ä½ä¿è¨¼ã®é©ç”¨
```

**ã‚¿ã‚¹ã‚¯ 2.3: ã‚³ã‚¹ãƒˆè¨ˆç®—**
```
â–¡ calculateUpgradeCost.ts
  â–¡ åŸºæœ¬ã‚³ã‚¹ãƒˆã®å–å¾—
  â–¡ å¼·åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³å€ç‡ã®é©ç”¨
  â–¡ é­”çŸ³ã®å……è¶³ç¢ºèª
```

---

### Phase 3: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿè£…ï¼ˆWeek 2: Day 3-5ï¼‰

**ã‚¿ã‚¹ã‚¯ 3.1: Blacksmith.tsx**
```
â–¡ ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ
â–¡ ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆï¼ˆå¼·åŒ–ãƒ»ä¿®ç† / è§£ä½“ï¼‰
â–¡ ãƒªã‚½ãƒ¼ã‚¹è¡¨ç¤º
```

**ã‚¿ã‚¹ã‚¯ 3.2: UpgradeTab.tsx**
```
â–¡ è£…å‚™ãƒªã‚¹ãƒˆè¡¨ç¤º
â–¡ è£…å‚™è©³ç´°ãƒ‘ãƒãƒ«
â–¡ å¼·åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³é¸æŠUI
â–¡ å¼·åŒ–å®Ÿè¡Œ
```

**ã‚¿ã‚¹ã‚¯ 3.3: DismantleTab.tsx**
```
â–¡ è§£ä½“å¯èƒ½è£…å‚™ãƒªã‚¹ãƒˆ
â–¡ è§£ä½“äºˆæ¸¬è¡¨ç¤º
â–¡ ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
```

---

### Phase 4: ä¿®ç†ãƒ»è§£ä½“ã®å®Ÿè£…ï¼ˆWeek 3: Day 1-3ï¼‰

**ã‚¿ã‚¹ã‚¯ 4.1: ä¿®ç†ã‚·ã‚¹ãƒ†ãƒ **
```
â–¡ repairEquipment.ts
  â–¡ ã‚³ã‚¹ãƒˆè¨ˆç®—
  â–¡ APå›å¾©å‡¦ç†
```

**ã‚¿ã‚¹ã‚¯ 4.2: è§£ä½“ã‚·ã‚¹ãƒ†ãƒ **
```
â–¡ dismantleEquipment.ts
  â–¡ é­”çŸ³å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯
  â–¡ ãƒœãƒ¼ãƒŠã‚¹åˆ¤å®š
  â–¡ ã‚¢ã‚¤ãƒ†ãƒ å‰Šé™¤
```

---

### Phase 5: æ¼”å‡ºã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆWeek 3: Day 4-5ï¼‰

**ã‚¿ã‚¹ã‚¯ 5.1: CSSå®Ÿè£…**
```
â–¡ Blacksmith.css
â–¡ UpgradeTab.css
â–¡ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾©
```

**ã‚¿ã‚¹ã‚¯ 5.2: ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå®Ÿè£…**
```
â–¡ å¼·åŒ–æ¼”å‡º
â–¡ å“è³ªä¸Šæ˜‡æ¼”å‡ºï¼ˆç‰¹åˆ¥ï¼‰
â–¡ ã‚¹ã‚­ãƒ«è§£æ”¾æ¼”å‡º
â–¡ ä¿®ç†ãƒ»è§£ä½“æ¼”å‡º
```

---

## 6. Context APIã¨ã®é€£æº

### 6.1 PlayerContext
```typescript
const { player, useGold, addGold } = usePlayer();

// å¼·åŒ–æ™‚
if (useGold(upgradeCost.gold)) {
  // å¼·åŒ–å®Ÿè¡Œ
}

// ä¿®ç†æ™‚
if (useGold(repairCost)) {
  // ä¿®ç†å®Ÿè¡Œ
}
```

### 6.2 InventoryContext
```typescript
const { 
  items, 
  updateItem,
  removeItem,
  addItem,
  useMagicStones 
} = useInventory();

// å¼·åŒ–æ™‚ï¼ˆé­”çŸ³æ¶ˆè²»ï¼‰
if (useMagicStones(requiredMagicStoneValue, option.magicStonePreference)) {
  // å¼·åŒ–å®Ÿè¡Œ
  const upgradedEquipment = upgradeEquipment(equipment);
  updateItem(equipment.id, upgradedEquipment);
}

// è§£ä½“æ™‚
removeItem(equipment.id);
dismantleResult.magicStones.forEach(stone => {
  addItem(createMagicStoneItem(stone.typeId, stone.count));
});
```

### 6.3 GameStateContext
```typescript
const { returnToCamp } = useGameState();

// ã‚­ãƒ£ãƒ³ãƒ—ã«æˆ»ã‚‹
<button onClick={returnToCamp}>ã‚­ãƒ£ãƒ³ãƒ—ã«æˆ»ã‚‹</button>
```

---

## 7. æ³¨æ„äº‹é …

### 7.1 å“è³ªã‚·ã‚¹ãƒ†ãƒ ã®æ®µéšçš„å°å…¥

**Shopå®Ÿè£…æ™‚ï¼ˆPhase 1ï¼‰:**
- è£…å‚™ã¯å“è³ªãªã—ã§ç”Ÿæˆï¼ˆã¾ãŸã¯ã™ã¹ã¦ normalï¼‰
- ãƒ¬ãƒ™ãƒ«ã¯ Lv0

**é›å†¶å±‹å®Ÿè£…æ™‚ï¼š**
- å“è³ªã‚·ã‚¹ãƒ†ãƒ ã‚’å…¨è£…å‚™ã«é©ç”¨
- æ—¢å­˜è£…å‚™ã« `quality: 'normal'` ã‚’é¡åŠä»˜ä¸
- Shop ã®è£…å‚™ãƒ‘ãƒƒã‚¯ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ã‚’æ›´æ–°

### 7.2 ãƒãƒˆãƒ«ã¸ã®åæ˜ 

**é‡è¦:** ãƒãƒˆãƒ«è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã¯ã€è£…å‚™ã® `stats` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆå“è³ªãƒ»ãƒ¬ãƒ™ãƒ«é©ç”¨æ¸ˆã¿ï¼‰ã‚’å‚ç…§ã™ã‚‹ã‚ˆã†ã«ä¿®æ­£ãŒå¿…è¦ã€‚

```typescript
// âŒ æ—§ãƒ­ã‚¸ãƒƒã‚¯
const totalAtk = baseAtk + equipment.baseAtk;

// âœ… æ–°ãƒ­ã‚¸ãƒƒã‚¯
const totalAtk = baseAtk + (equipment.stats.atk || 0);
```

### 7.3 å¼·åŒ–ã‚³ã‚¹ãƒˆã®ãƒãƒ©ãƒ³ã‚¹èª¿æ•´

**Phase 1:** è¨­è¨ˆæ›¸ã®ã‚³ã‚¹ãƒˆè¡¨ã‚’ä½¿ç”¨

**Phase 1å®Ÿè£…å¾Œ:** ãƒ—ãƒ¬ã‚¤ãƒ†ã‚¹ãƒˆã‚’çµŒã¦ãƒãƒ©ãƒ³ã‚¹èª¿æ•´
- Goldã‚³ã‚¹ãƒˆã®èª¿æ•´
- é­”çŸ³ã‚³ã‚¹ãƒˆã®èª¿æ•´
- å“è³ªä¸Šæ˜‡ç¢ºç‡ã®èª¿æ•´

### 7.4 ãƒ‡ãƒ¼ã‚¿ä¿å­˜

è£…å‚™ã® `level` ã¨ `quality` ã¯æ°¸ç¶šåŒ–ãŒå¿…è¦ï¼š
- ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã«å«ã‚ã‚‹
- InventoryContext ã§ç®¡ç†

---

## 8. å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

```
BASE_CAMP_DESIGN_V1
â”œâ”€â”€ GUILD_DESIGN_V2.1
â”œâ”€â”€ SHOP_DESIGN_V1
â””â”€â”€ BLACKSMITH_DESIGN_V1 [æœ¬æ–‡æ›¸]
    â”œâ”€â”€ equipmentGenerator.ts [è£…å‚™ç”Ÿæˆ]
    â”œâ”€â”€ upgradeEquipment.ts [å¼·åŒ–ãƒ­ã‚¸ãƒƒã‚¯]
    â”œâ”€â”€ qualityUpgrade.ts [å“è³ªä¸Šæ˜‡]
    â””â”€â”€ EQUIPMENT_AND_ITEMS_DESIGN.md [è£…å‚™ãƒ‡ãƒ¼ã‚¿]
```

---

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:** å®Ÿè£…æ‰‹é †æ›¸ã®è©³ç´°ç‰ˆã‚’ä½œæˆ

## ã¾ã¨ã‚

é›å†¶å±‹ã®è¨­è¨ˆãŒå®Œæˆã—ã¾ã—ãŸï¼š

**ä¸»ãªæ©Ÿèƒ½:**
- âœ… è£…å‚™å¼·åŒ–ï¼ˆãƒ¬ãƒ™ãƒ«0-3ï¼‰
- âœ… **å“è³ªä¸Šæ˜‡ã‚·ã‚¹ãƒ†ãƒ ï¼ˆã‚¬ãƒãƒ£è¦ç´ ï¼‰**
- âœ… **é­”çŸ³ã‚¯ã‚ªãƒªãƒ†ã‚£ã«ã‚ˆã‚‹ç¢ºç‡å¤‰å‹•**
- âœ… ä¿®ç†ã‚·ã‚¹ãƒ†ãƒ 
- âœ… è§£ä½“ã‚·ã‚¹ãƒ†ãƒ 

**å“è³ªä¸Šæ˜‡ã®æ–°ãƒ¡ã‚«ãƒ‹ã‚¯ã‚¹:**
1. å¼·åŒ–æ™‚ã«å“è³ªãŒä¸Šæ˜‡ã™ã‚‹ãƒãƒ£ãƒ³ã‚¹
2. é­”çŸ³ã®ç¨®é¡ã§ç¢ºç‡ãƒ»æœ€ä½ä¿è¨¼ãŒå¤‰ã‚ã‚‹
3. é€šå¸¸ãƒ»å“è³ªé‡è¦–ãƒ»æœ€é«˜å“è³ªç‹™ã„ã®3ã‚ªãƒ—ã‚·ãƒ§ãƒ³
4. ã‚¬ãƒãƒ£è¦ç´ ã§ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æœŸå¾…æ„Ÿã‚’é«˜ã‚ã‚‹

å®Ÿè£…æº–å‚™ãŒæ•´ã„ã¾ã—ãŸï¼
